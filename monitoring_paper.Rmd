---
title: "Реализация мониторинга скоринговых карт на языке R"
author: "Кирилл Гущин"
date: "12/25/2018"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## О чем хотелось бы рассказать?  
 
1. Зачем нужно мониторить модели  
2. Какую проблему мы решали  
3. Как это сделать на R  (варианты дашборд, статические документы)
4. 
5. Альтернативы: Shiny highcharter
6. Оптимизация - считать только за последний квартал

## Зачем мониторить статистические модели

* Изменение свойств потока, по сравнению с тем данными, на которых строилась модель (shifting covariates)  
* Всякая очевидная хрень  
* Что-нить про модельный риск  
* Что-нить про регуляторку

В целом наличие инструмента, который позволяет владельцам/разработчикам моделей оперативно контролировать их работу в промышленных средах, ведет к лучшему управлению и пониманию модельного риска. 

```{r cars}

```

## Какую практическую проблему решали мы

Предыдущие версии мониторинга моделей состояли из набора SAS-макросов, которые надо было запускать в определенной последовательности, получить на выходе набор таблиц в Excel, произвести дополнительную ручную обработку, и некоторые из полученных графиков и таблиц вставить в презентацию.  
Такой полуручной процесс занимал значительную часть времени и было понимание, что данное регулярное упражнение нужно автоматизировать.  
Так же автоматизация позволила бы производить анализ работы моделей на любую желамаю дату, а не только на отчетные квартальные даты.

Возможно тут вставить диаграмму прошлой версии процесса:
```{r pressure, echo=FALSE}
plot(pressure)
```

В итоге задача по автоматизации данного процесса превратилась в две связанные задачи:  
* задача по автоматизации отчетов в виде статичных документов (.word, .pdf)  
* задача по созданию внутреннего **интерактивного** дашборда с высокой степенью детализации качества работы модели в промышленных средах  

Диаграмма новой версии процессов
```{r}

```

Для решения данной задачи мы использовали R c набором пакетов ...
Что-написать про rmarkdwon, knitr, flexdashboard, yaml в заголовке при параметризации файлов.
Концепция вычислимых документов из Кнута и какая-то связь с rmarkdowmn.  

Более приоритетной являлась задача автоматизации статичных отчетов, так как она должна была заменить уже существующий процесс. А дашборд стать более удобным, более детальным и интерактивным дополнением для внутренних целей.

## Построение мониторинга
Схема как гониться по всем таблицам 
```{r}

```


Самой сложной задачей, которую надо решить, - понять какие графики и таблицы вы хотите видеть в своем отчете. Затем создать rmarkdown (.Rmd) документ, в котором бы отрисовывалось бы все для одной модели. Далее остается параметризовать документ источником данных, который свой для каждой модели, и запустить отрисовку для всех моделей.

В нашем мониторинге мы мониторим следующие показатели:
* Динамика дискриминационной способности модели    
* Какая-то херь по бинам  

Рассмотрим создание простейшего отчета, который мониторит только динамику дискриминационной способности
(или писать про то как у нас все сделано с примером по шагам)

## Построение дашборда
Схема как гониться по всем таблицам плюс заглавная страница 
```{r}

```

### Краткое введение в flexdashboard

Dashboard Basics
Components
You can use flexdashboard to publish groups of related data visualizations as a dashboard. A flexdashboard can either be static (a standard web page) or dynamic (a Shiny interactive document). A wide variety of components can be included in flexdashboard layouts, including:  

Interactive JavaScript data visualizations based on htmlwidgets.

R graphical output including base, lattice, and grid graphics.

Tabular data (with optional sorting, filtering, and paging).

Value boxes for highlighting important summary data.

Gauges for displaying values on a meter within a specified range.

Text annotations of various kinds.

(ссылка на сайт Rstudio)

Основные инструменты, которыми мы пользовались для создания дашборда:
* flexdashboard - описание  
* plotly - для интерактивной график















